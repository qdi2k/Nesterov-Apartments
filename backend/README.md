# Nesterov Apartments -Backend 
Веб-сайт, демонстрации новых жилищных комплексов от застройщика, с возможностью записаться на просмотр квартир


## Миграции БД

---

В проекте используется **Alembic** — мощный инструмент для управления 
миграциями базы данных, который интегрирован с **PostgreSQL**. 
Alembic позволяет легко создавать, применять и откатывать изменения в структуре
базы данных. Для работы с базой данных используется **SQLAlchemy** — популярная
**ORM** библиотека **Python**, которая обеспечивает удобное взаимодействие с
реляционными БД через **ООП**.

Для работы с базой данных используется **асинхронный подход**, что обеспечивает 
высокую производительность, это позволяет эффективно обрабатывать запросы к 
базе данных без блокировки основного потока выполнения.

Подключение к БД осуществляется в связке `postgresql+asyncpg`

### Для работы с миграциями следует использовать следующие команды:

- Первый анализ изменений в БД и создание миграции

    ###### В репозитории уже есть начальные миграции (можно не использовать).
    ```bash
      alembic revision --autogenerate -m 'initial'
    ```

- Анализ изменений в БД и создание миграции
    ```bash
      alembic revision --autogenerate -m 'migration_name'
    ```

- Применение миграции (Изменение DDL в БД)
    ```bash
      alembic upgrade head
    ```

- Откатить изменения назад
    ```bash
      alembic downgrade -1
    ```


### TODO:

- Добавить в env разные Debug флаги
- Изменить сохрание картинки в БД чтобы сохранялось только название и название мы меняли
- Настроить логирование правильно
- Добавить больше настроек в движок
- Добавить авторизацию в админку
---
- Убрать район
- Поля для вывода поиска (
      Статус_продажи[в продаже/не в продаже], Дата_постройки(квартал - год),
      Площадь, этаж
- )
- Поле скидка в квартира процент
- Город в path_field в URL
---
- Переопределить S3 из fastapistorage в async
- 